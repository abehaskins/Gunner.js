var Cannon=function(a){this.url=a,this.reloaderStrs={},this.projectileStr="*",this.rawData=[],this.fetches=0,this.delayInt=0;var b=this;return this.fire=function(a){return b._fetch(a),b},this.reload=function(a){return b.reloaderStrs=a,b},this.limit=function(a){return b.limitInt=a,b},this.delay=function(a){return b.delayInt=a,b},this.projectile=function(a){return b.projectileStr=a,b},this.recoil=function(a){return b._getField(b.rawData,b.projectileStr,a)},this._fetch=function(a,c,d){if(b.limitInt&&b.fetches++==b.limitInt)return a(c,b),void 0;d=d?d:{};var e=function(d){b.rawData.push(d);var e=b._getField([d],b.projectileStr);if(b._isArray(e)){c||(c=[]);for(var f=0;f<e.length;f++)c.push(e[f])}var g={},h=!1;for(var i in b.reloaderStrs){{b.reloaderStrs[i]}g[i]=b._getField([d],b.reloaderStrs[i])[0],h=g[i]||h}return h?(setTimeout(function(){b._fetch(a,c,g)},b.delayInt),void 0):(a(c,b),void 0)};this._getURL(b.url,d).then(e)},this._getField=function(a,c,d){for(var e=c.split("."),f=[],g=0;g<e.length;g++){for(var h=e[g],i=[],j=0;j<a.length;j++){var k=a[j];if("*"==h){var l;if(b._isArray(a))for(l=0;l<k.length;l++)i.push(k[l]),k[l]==d&&f.push(k);else for(l in k)i.push(k[l]),k[l]==d&&f.push(k)}else k[h]&&(i.push(k[h]),k[h]==d&&f.push(k))}a=i}return d?f:a},this._getURL=function(a,c){function d(a){e.resolve(JSON.parse(a.responseText||a.currentTarget.responseText))}var e=b._defer(),f=[],g="";for(var h in c)f.push(h+"="+c[h]);f.length&&(g="?"+f.join("&"));var i=new XMLHttpRequest;return i.onload=d,i.open("get",a+g,!0),i.send(),e.promise},this._defer=function(){var a={};return a.promise={then:function(b){a.callback=b,a.resolved&&a.finish()}},a.resolve=function(){a.args=arguments,a.callback&&a.finish(),a.resolved=!0},a.finish=function(){a.callback.apply(b,a.args)},a},this._isArray=function(a){return"[object Array]"==toString.call(a)},this};new Cannon("http://api.reddit.com/user/abeisgreat/comments.json").projectile("data.children.*.data.subreddit").delay(100).fire(function(a,b){console.log("Caught projectile"),console.log(a);var c=b.recoil("PixelArt");for(var d in c){var e=c[d];console.log(e.body)}});